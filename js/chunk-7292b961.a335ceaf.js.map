{"version":3,"sources":["webpack:///./src/views/message/Message.vue?89f8","webpack:///src/views/message/Message.vue","webpack:///./src/views/message/Message.vue?8a58","webpack:///./src/views/message/Message.vue","webpack:///./src/views/message/Message.vue?5749"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","style","_v","directives","name","rawName","value","expression","attrs","domProps","on","$event","show","type","indexOf","_k","keyCode","key","addToList","target","composing","content","barrageList","scopedSlots","_u","fn","slotProps","staticStyle","item","avatar","_s","nickname","staticRenderFns","metaInfo","meta","mounted","listMessage","data","img","count","timer","methods","$toast","trim","message","userAvatar","status","userNickname","time","Math","floor","random","push","TIME_COUNT","setInterval","clearInterval","computed","cover","$store","state","blogInfo","pageList","forEach","pageLabel","pageCover","component"],"mappings":"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","file":"js/chunk-7292b961.a335ceaf.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"message-banner\",style:(_vm.cover)},[_c('div',{staticClass:\"message-container\"},[_c('h1',{staticClass:\"message-title\"},[_vm._v(\"留言板\")]),_c('div',{staticClass:\"animated fadeInUp message-input-wrapper\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.content),expression:\"content\"}],attrs:{\"placeholder\":\"说点什么吧\"},domProps:{\"value\":(_vm.content)},on:{\"click\":function($event){_vm.show = true},\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.addToList($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.content=$event.target.value}}}),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show),expression:\"show\"}],staticClass:\"ml-3 animated bounceInLeft\",on:{\"click\":_vm.addToList}},[_vm._v(\" 发送 \")])])]),_c('div',{staticClass:\"barrage-container\"},[_c('vue-baberrage',{attrs:{\"barrageList\":_vm.barrageList},scopedSlots:_vm._u([{key:\"default\",fn:function(slotProps){return [_c('span',{staticClass:\"barrage-items\"},[_c('img',{staticStyle:{\"border-radius\":\"50%\"},attrs:{\"src\":slotProps.item.avatar,\"width\":\"30\",\"height\":\"30\"}}),_c('span',{staticClass:\"ml-2\"},[_vm._v(_vm._s(slotProps.item.nickname)+\" :\")]),_c('span',{staticClass:\"ml-2\"},[_vm._v(_vm._s(slotProps.item.content))])])]}}])})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- banner -->\r\n    <div class=\"message-banner\" :style=\"cover\">\r\n      <!-- 弹幕输入框 -->\r\n      <div class=\"message-container\">\r\n        <h1 class=\"message-title\">留言板</h1>\r\n        <div class=\"animated fadeInUp message-input-wrapper\">\r\n          <input\r\n            v-model=\"content\"\r\n            @click=\"show = true\"\r\n            @keyup.enter=\"addToList\"\r\n            placeholder=\"说点什么吧\"\r\n          />\r\n          <button\r\n            class=\"ml-3 animated bounceInLeft\"\r\n            @click=\"addToList\"\r\n            v-show=\"show\"\r\n          >\r\n            发送\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <!-- 弹幕列表 -->\r\n      <div class=\"barrage-container\">\r\n        <vue-baberrage :barrageList=\"barrageList\">\r\n          <template v-slot:default=\"slotProps\">\r\n            <span class=\"barrage-items\">\r\n              <img\r\n                :src=\"slotProps.item.avatar\"\r\n                width=\"30\"\r\n                height=\"30\"\r\n                style=\"border-radius:50%\"\r\n              />\r\n              <span class=\"ml-2\">{{ slotProps.item.nickname }} :</span>\r\n              <span class=\"ml-2\">{{ slotProps.item.content }}</span>\r\n            </span>\r\n          </template>\r\n        </vue-baberrage>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {listMessage,addMessage} from '../../api'\r\nexport default {\r\n  metaInfo:{\r\n    meta: [{\r\n      name: 'chrelyonly',\r\n      content: \"www.chrelyonly.com,博客,个人博客,前后盾分离博客\"  //变量或字符串\r\n    }, {\r\n      name: 'description',\r\n      content: \"www.chrelyonly.com,博客,个人博客,前后盾分离博客\"\r\n    }]\r\n  },\r\n  mounted() {\r\n    this.listMessage();\r\n  },\r\n  data() {\r\n    return {\r\n      show: false,\r\n      img: process.env.VUE_APP_IMG_API,\r\n      content: \"\",\r\n      count: null,\r\n      timer: null,\r\n      barrageList: []\r\n    };\r\n  },\r\n  methods: {\r\n    addToList() {\r\n      if (this.count){\r\n        this.$toast({ type: \"error\", message: \"30秒后才能再次留言\" });\r\n        return false;\r\n      }\r\n      if (this.content.trim() === \"\") {\r\n        this.$toast({ type: \"error\", message: \"留言不能为空\" });\r\n        return false;\r\n      }\r\n      const userAvatar = this.$store.state.avatar\r\n        ? this.$store.state.avatar\r\n        : this.$store.state.blogInfo.webSite.touristAvatar;\r\n      const userNickname = this.$store.state.nickname\r\n        ? this.$store.state.nickname\r\n        : \"游客\";\r\n      var message = {\r\n        avatar: userAvatar,\r\n        status: 1,\r\n        nickname: userNickname,\r\n        content: this.content,\r\n        time: Math.floor(Math.random() * (10 - 7)) + 7\r\n      };\r\n      this.barrageList.push(message);\r\n      this.content = \"\";\r\n      addMessage(message);\r\n      const TIME_COUNT = 30;\r\n      if (!this.timer) {\r\n        this.count = TIME_COUNT;\r\n        this.timer = setInterval(() => {\r\n          if (this.count > 0 && this.count <= 30) {\r\n            this.count--;\r\n          } else {\r\n            clearInterval(this.timer);\r\n            this.timer = null;\r\n          }\r\n        }, 1000);\r\n      }\r\n    },\r\n    listMessage() {\r\n      listMessage().then(res=> {\r\n        this.barrageList = res.data;\r\n      });\r\n    }\r\n  },\r\n  computed: {\r\n    cover() {\r\n      var cover = \"\";\r\n      this.$store.state.blogInfo.pageList.forEach(item => {\r\n        if (item.pageLabel == \"message\") {\r\n          cover = item.pageCover;\r\n        }\r\n      });\r\n      return \"background: url(\" + cover + \") center center / cover no-repeat\";\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.message-banner {\r\n  position: absolute;\r\n  top: -60px;\r\n  left: 0;\r\n  right: 0;\r\n  height: 100vh;\r\n  background-color: #49b1f5;\r\n  animation: header-effect 1s;\r\n}\r\n.message-title {\r\n  color: #eee;\r\n  animation: title-scale 1s;\r\n}\r\n.message-container {\r\n  position: absolute;\r\n  width: 360px;\r\n  top: 35%;\r\n  left: 0;\r\n  right: 0;\r\n  text-align: center;\r\n  z-index: 5;\r\n  margin: 0 auto;\r\n  color: #fff;\r\n}\r\n.message-input-wrapper {\r\n  display: flex;\r\n  justify-content: center;\r\n  height: 2.5rem;\r\n  margin-top: 2rem;\r\n}\r\n.message-input-wrapper input {\r\n  outline: none;\r\n  width: 70%;\r\n  border-radius: 20px;\r\n  height: 100%;\r\n  padding: 0 1.25rem;\r\n  color: #eee;\r\n  border: #fff 1px solid;\r\n}\r\n.message-input-wrapper input::-webkit-input-placeholder {\r\n  color: #eeee;\r\n}\r\n.message-input-wrapper button {\r\n  outline: none;\r\n  border-radius: 20px;\r\n  height: 100%;\r\n  padding: 0 1.25rem;\r\n  border: #fff 1px solid;\r\n}\r\n.barrage-container {\r\n  position: absolute;\r\n  top: 50px;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  height: calc(100% -50px);\r\n  width: 100%;\r\n}\r\n.barrage-items {\r\n  background: rgb(0, 0, 0, 0.7);\r\n  border-radius: 100px;\r\n  color: #fff;\r\n  padding: 5px 10px 5px 5px;\r\n  align-items: center;\r\n  display: flex;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Message.vue?vue&type=template&id=063babcc&scoped=true&\"\nimport script from \"./Message.vue?vue&type=script&lang=js&\"\nexport * from \"./Message.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Message.vue?vue&type=style&index=0&id=063babcc&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"063babcc\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=style&index=0&id=063babcc&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=style&index=0&id=063babcc&scoped=true&lang=css&\""],"sourceRoot":""}